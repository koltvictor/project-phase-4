{"ast":null,"code":"var _jsxFileName = \"/Users/sillysadsoy/Desktop/project-phase-4/client/src/Auth.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport { useState, useEffect } from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Header from './components/Header';\nimport Search from './components/Search';\nimport NewBookForm from './components/NewBookForm';\nimport NewAuthorForm from './components/NewAuthorForm';\nimport BookList from './components/BookList';\nimport AuthorList from './components/AuthorList';\nimport BookDetails from './components/BookDetails';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Auth({\n  currentUser,\n  setCurrentUser\n}) {\n  _s();\n\n  const history = useHistory();\n\n  const handleLogout = () => {\n    fetch(`/logout`, {\n      method: 'DELETE',\n      credentials: 'include'\n    }).then(res => {\n      if (res.ok) {\n        setCurrentUser(null);\n        history.push('/');\n      }\n    });\n  };\n\n  const [newBookInput, setNewBook] = useState({\n    title: '',\n    image: '',\n    isbn: '',\n    desc: '',\n    publisher: '',\n    author: []\n  });\n  const [newAuthorInput, setNewAuthor] = useState({\n    name: '',\n    image: '',\n    desc: ''\n  });\n  const [booksList, setBooksList] = useState([]);\n  const [getAuthors, setGetAuthors] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  useEffect(() => {\n    fetch(\"http://localhost:3000/authors\").then(response => response.json()).then(authorArr => setGetAuthors(authorArr));\n  }, [setNewAuthor, newAuthorInput, newBookInput]);\n  useEffect(() => {\n    fetch(`http://localhost:3000/books`).then(resp => resp.json()).then(books => setBooksList(books));\n  }, [setNewBook, newBookInput, newAuthorInput]); // useEffect(() => {\n  //   fetch(`http://localhost:3000/books`)\n  //   .then(resp => resp.json())\n  //   .then(books => console.log(books));})\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if (e.target.id === 'newBookForm') {\n      fetch(`http://localhost:3000/books`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newBookInput)\n      }).then(resp => resp.json()).then(() => setNewBook({\n        title: '',\n        image_url: '',\n        isbn: '',\n        description: '',\n        publisher: '',\n        author: ''\n      }));\n    } else {\n      fetch(`http://localhost:3000/books`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newAuthorInput)\n      }).then(resp => resp.json()).then(() => setNewAuthor({\n        name: '',\n        image_url: '',\n        description: ''\n      }));\n    }\n  }\n\n  ;\n  const filteredBooks = booksList.filter(book => (book.title || '').toLowerCase().includes(search.toLowerCase()));\n  const filteredAuthors = getAuthors.filter(author => author.name.toLowerCase().includes(search.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      setCurrentUser: setCurrentUser,\n      currentUser: currentUser,\n      handleLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/books/new\",\n        children: /*#__PURE__*/_jsxDEV(NewBookForm, {\n          newBookInput: newBookInput,\n          setNewBook: setNewBook,\n          handleSubmit: handleSubmit,\n          getAuthors: getAuthors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/books/:id\",\n        component: BookDetails\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/authors/new\",\n        children: /*#__PURE__*/_jsxDEV(NewAuthorForm, {\n          newAuthorInput: newAuthorInput,\n          setNewAuthor: setNewAuthor,\n          handleSubmit: handleSubmit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/authors\",\n        children: [/*#__PURE__*/_jsxDEV(Search, {\n          search: search,\n          setSearch: setSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AuthorList, {\n          filteredAuthors: filteredAuthors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        children: [/*#__PURE__*/_jsxDEV(Search, {\n          search: search,\n          setSearch: setSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BookList, {\n          filteredBooks: filteredBooks\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Auth, \"r5FLRPozBCAbAxHL95KJv9n0bBc=\", false, function () {\n  return [useHistory];\n});\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/Users/sillysadsoy/Desktop/project-phase-4/client/src/Auth.js"],"names":["useState","useEffect","Route","Switch","Redirect","useHistory","Header","Search","NewBookForm","NewAuthorForm","BookList","AuthorList","BookDetails","Auth","currentUser","setCurrentUser","history","handleLogout","fetch","method","credentials","then","res","ok","push","newBookInput","setNewBook","title","image","isbn","desc","publisher","author","newAuthorInput","setNewAuthor","name","booksList","setBooksList","getAuthors","setGetAuthors","search","setSearch","response","json","authorArr","resp","books","handleSubmit","e","preventDefault","target","id","headers","body","JSON","stringify","image_url","description","filteredBooks","filter","book","toLowerCase","includes","filteredAuthors"],"mappings":"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","sourcesContent":["import './App.css';\n\nimport { useState, useEffect } from 'react';\n\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\n\nimport Header from './components/Header';\n\nimport Search from './components/Search';\n\nimport NewBookForm from './components/NewBookForm';\nimport NewAuthorForm from './components/NewAuthorForm';\n\nimport BookList from './components/BookList';\nimport AuthorList from './components/AuthorList';\nimport BookDetails from './components/BookDetails';\n\nfunction Auth({ currentUser, setCurrentUser }) {\n\n  const history = useHistory();\n\n  const handleLogout = () => {\n    fetch(`/logout`, {\n      method: 'DELETE',\n      credentials: 'include'\n    })\n      .then(res => {\n        if (res.ok) {\n          setCurrentUser(null)\n          history.push('/')\n        }\n      })\n  };\n\n  const [newBookInput, setNewBook] = useState(\n    {title: '', image: '', isbn: '', desc: '', publisher: '', author: []}\n    );\n\n  const [newAuthorInput, setNewAuthor] = useState(\n    {name: '', image: '', desc: ''}\n    );\n\n  const [booksList, setBooksList] = useState([]);\n\n  const [getAuthors, setGetAuthors] = useState([]);\n\n  const [search, setSearch] = useState(\"\");\n\n  useEffect(() => {\n    fetch(\"http://localhost:3000/authors\")\n    .then(response => response.json())\n    .then(authorArr => setGetAuthors(authorArr))\n    }, [setNewAuthor, newAuthorInput, newBookInput])\n\n  useEffect(() => {\n    fetch(`http://localhost:3000/books`)\n    .then(resp => resp.json())\n    .then(books => setBooksList(books))\n  },[setNewBook, newBookInput, newAuthorInput]);\n\n  // useEffect(() => {\n  //   fetch(`http://localhost:3000/books`)\n  //   .then(resp => resp.json())\n  //   .then(books => console.log(books));})\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    if(e.target.id === 'newBookForm')\n    {fetch(`http://localhost:3000/books`, {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(newBookInput)})\n      .then(resp => resp.json())\n      .then(() => setNewBook({title: '', image_url: '', isbn: '', description: '', publisher: '', author: ''}))\n    }\n    else\n    {fetch(`http://localhost:3000/books`, {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(newAuthorInput)})\n      .then(resp => resp.json())\n      .then(() => setNewAuthor({name: '', image_url: '', description: ''}))\n    }\n  };\n\n  const filteredBooks =  booksList.filter(book => (book.title||'').toLowerCase().includes(search.toLowerCase()));\n\n  const filteredAuthors =  getAuthors.filter(author => author.name.toLowerCase().includes(search.toLowerCase()));\n\n\n  return (\n    <div className=\"App\">\n\n      <Header setCurrentUser={setCurrentUser}\n              currentUser={currentUser}\n              handleLogout={handleLogout}/>\n\n      {/* <Search search={search} setSearch={setSearch}/> */}\n\n      <Switch>\n\n        <Route path='/books/new'>\n          <NewBookForm newBookInput={newBookInput}\n                      setNewBook={setNewBook}\n                      handleSubmit={handleSubmit}\n                      getAuthors={getAuthors} />\n        </Route>\n\n        <Route path='/books/:id' component={BookDetails} />\n\n        <Route path='/authors/new'>\n          <NewAuthorForm newAuthorInput={newAuthorInput}\n                      setNewAuthor={setNewAuthor}\n                      handleSubmit={handleSubmit} />\n        </Route>\n\n        <Route path='/authors'>\n          <Search search={search} setSearch={setSearch}/>\n          <AuthorList filteredAuthors={filteredAuthors}/>\n        </Route>\n\n        <Route path='/'>\n          <Search search={search} setSearch={setSearch}/>\n          <BookList filteredBooks={filteredBooks}/>\n        </Route>\n\n      </Switch>\n\n    </div>\n  );\n}\nexport default Auth;"]},"metadata":{},"sourceType":"module"}