{"ast":null,"code":"var _jsxFileName = \"/Users/sillysadsoy/Desktop/project-phase-4/client/src/Auth.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport { useState, useEffect } from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Header from './components/Header';\nimport Search from './components/Search';\nimport NewBookForm from './components/NewBookForm';\nimport NewAuthorForm from './components/NewAuthorForm';\nimport BookList from './components/BookList';\nimport AuthorList from './components/AuthorList';\nimport BookDetails from './components/BookDetails';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Auth({\n  currentUser,\n  setCurrentUser\n}) {\n  _s();\n\n  const history = useHistory();\n\n  const handleLogout = () => {\n    fetch(`/logout`, {\n      method: 'DELETE',\n      credentials: 'include'\n    }).then(res => {\n      if (res.ok) {\n        setCurrentUser(null);\n        history.push('/');\n      }\n    });\n  };\n\n  const [newBookInput, setNewBook] = useState({\n    title: '',\n    image: '',\n    isbn: '',\n    desc: '',\n    publisher: '',\n    author: []\n  });\n  const [newAuthorInput, setNewAuthor] = useState({\n    name: '',\n    image: '',\n    desc: ''\n  });\n  const [booksList, setBooksList] = useState([]);\n  const [getAuthors, setGetAuthors] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  useEffect(() => {\n    fetch(\"http://localhost:3000/authors\").then(response => response.json()).then(authorArr => setGetAuthors(authorArr));\n  }, [setNewAuthor, newAuthorInput, newBookInput]);\n  useEffect(() => {\n    fetch(`http://localhost:3000/books`).then(resp => resp.json()).then(books => setBooksList(books));\n  }, [setNewBook, newBookInput, newAuthorInput]);\n  useEffect(() => {\n    fetch(`http://localhost:3000/books`).then(resp => resp.json()).then(books => console.log(books));\n  });\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if (e.target.id === 'newBookForm') {\n      fetch(`http://localhost:3000/books`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newBookInput)\n      }).then(resp => resp.json()).then(() => setNewBook({\n        title: '',\n        image: '',\n        isbn: '',\n        desc: '',\n        publisher: '',\n        author: ''\n      }));\n    } else {\n      fetch(`http://localhost:3000/books`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newAuthorInput)\n      }).then(resp => resp.json()).then(() => setNewAuthor({\n        name: '',\n        image: '',\n        desc: ''\n      }));\n    }\n  }\n\n  const filteredBooks = booksList.filter(book => (book.title || '').toLowerCase().includes(search.toLowerCase()));\n  const filteredAuthors = getAuthors.filter(author => (author.name || '').toLowerCase().includes(search.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      setCurrentUser: setCurrentUser,\n      currentUser: currentUser,\n      handleLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/books/new\",\n        children: /*#__PURE__*/_jsxDEV(NewBookForm, {\n          newBookInput: newBookInput,\n          setNewBook: setNewBook,\n          handleSubmit: handleSubmit,\n          getAuthors: getAuthors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/books/:id\",\n        component: BookDetails\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/authors/new\",\n        children: /*#__PURE__*/_jsxDEV(NewAuthorForm, {\n          newAuthorInput: newAuthorInput,\n          setNewAuthor: setNewAuthor,\n          handleSubmit: handleSubmit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/authors\",\n        children: [/*#__PURE__*/_jsxDEV(Search, {\n          search: search,\n          setSearch: setSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AuthorList, {\n          filteredAuthors: (filteredAuthors, setNewAuthor, newAuthorInput, newBookInput)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        children: [/*#__PURE__*/_jsxDEV(Search, {\n          search: search,\n          setSearch: setSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BookList, {\n          filteredBooks: filteredBooks\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Auth, \"R9kJP/eEFhLDKV+MB4N9aAINFU0=\", false, function () {\n  return [useHistory];\n});\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/Users/sillysadsoy/Desktop/project-phase-4/client/src/Auth.js"],"names":["useState","useEffect","Route","Switch","Redirect","useHistory","Header","Search","NewBookForm","NewAuthorForm","BookList","AuthorList","BookDetails","Auth","currentUser","setCurrentUser","history","handleLogout","fetch","method","credentials","then","res","ok","push","newBookInput","setNewBook","title","image","isbn","desc","publisher","author","newAuthorInput","setNewAuthor","name","booksList","setBooksList","getAuthors","setGetAuthors","search","setSearch","response","json","authorArr","resp","books","console","log","handleSubmit","e","preventDefault","target","id","headers","body","JSON","stringify","filteredBooks","filter","book","toLowerCase","includes","filteredAuthors"],"mappings":";;;AAAA,OAAO,WAAP;AAEA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,UAAlC,QAAoD,kBAApD;AAEA,OAAOC,MAAP,MAAmB,qBAAnB;AAEA,OAAOC,MAAP,MAAmB,qBAAnB;AAEA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AAEA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;;;AAEA,SAASC,IAAT,CAAc;AAAEC,EAAAA,WAAF;AAAeC,EAAAA;AAAf,CAAd,EAA+C;AAAA;;AAE7C,QAAMC,OAAO,GAAGX,UAAU,EAA1B;;AACA,QAAMY,YAAY,GAAG,MAAM;AACzBC,IAAAA,KAAK,CAAE,SAAF,EAAY;AACfC,MAAAA,MAAM,EAAE,QADO;AAEfC,MAAAA,WAAW,EAAE;AAFE,KAAZ,CAAL,CAIGC,IAJH,CAIQC,GAAG,IAAI;AACX,UAAIA,GAAG,CAACC,EAAR,EAAY;AACVR,QAAAA,cAAc,CAAC,IAAD,CAAd;AACAC,QAAAA,OAAO,CAACQ,IAAR,CAAa,GAAb;AACD;AACF,KATH;AAUD,GAXD;;AAYA,QAAM,CAACC,YAAD,EAAeC,UAAf,IAA6B1B,QAAQ,CACzC;AAAC2B,IAAAA,KAAK,EAAE,EAAR;AAAYC,IAAAA,KAAK,EAAE,EAAnB;AAAuBC,IAAAA,IAAI,EAAE,EAA7B;AAAiCC,IAAAA,IAAI,EAAE,EAAvC;AAA2CC,IAAAA,SAAS,EAAE,EAAtD;AAA0DC,IAAAA,MAAM,EAAE;AAAlE,GADyC,CAA3C;AAGA,QAAM,CAACC,cAAD,EAAiBC,YAAjB,IAAiClC,QAAQ,CAC7C;AAACmC,IAAAA,IAAI,EAAE,EAAP;AAAWP,IAAAA,KAAK,EAAE,EAAlB;AAAsBE,IAAAA,IAAI,EAAE;AAA5B,GAD6C,CAA/C;AAGA,QAAM,CAACM,SAAD,EAAYC,YAAZ,IAA4BrC,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACsC,UAAD,EAAaC,aAAb,IAA8BvC,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACwC,MAAD,EAASC,SAAT,IAAsBzC,QAAQ,CAAC,EAAD,CAApC;AACAC,EAAAA,SAAS,CAAC,MAAM;AACdiB,IAAAA,KAAK,CAAC,+BAAD,CAAL,CACCG,IADD,CACMqB,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECtB,IAFD,CAEMuB,SAAS,IAAIL,aAAa,CAACK,SAAD,CAFhC;AAGC,GAJM,EAIJ,CAACV,YAAD,EAAeD,cAAf,EAA+BR,YAA/B,CAJI,CAAT;AAKAxB,EAAAA,SAAS,CAAC,MAAM;AACdiB,IAAAA,KAAK,CAAE,6BAAF,CAAL,CACCG,IADD,CACMwB,IAAI,IAAIA,IAAI,CAACF,IAAL,EADd,EAECtB,IAFD,CAEMyB,KAAK,IAAIT,YAAY,CAACS,KAAD,CAF3B;AAGD,GAJQ,EAIP,CAACpB,UAAD,EAAaD,YAAb,EAA2BQ,cAA3B,CAJO,CAAT;AAKAhC,EAAAA,SAAS,CAAC,MAAM;AACdiB,IAAAA,KAAK,CAAE,6BAAF,CAAL,CACCG,IADD,CACMwB,IAAI,IAAIA,IAAI,CAACF,IAAL,EADd,EAECtB,IAFD,CAEMyB,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAFf;AAEoC,GAH7B,CAAT;;AAIA,WAASG,YAAT,CAAsBC,CAAtB,EAAyB;AACvBA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAGD,CAAC,CAACE,MAAF,CAASC,EAAT,KAAgB,aAAnB,EACA;AAACnC,MAAAA,KAAK,CAAE,6BAAF,EAAgC;AACpCC,QAAAA,MAAM,EAAE,MAD4B;AAEpCmC,QAAAA,OAAO,EAAE;AAAC,0BAAgB;AAAjB,SAF2B;AAGpCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAehC,YAAf;AAH8B,OAAhC,CAAL,CAIEJ,IAJF,CAIOwB,IAAI,IAAIA,IAAI,CAACF,IAAL,EAJf,EAKEtB,IALF,CAKO,MAAMK,UAAU,CAAC;AAACC,QAAAA,KAAK,EAAE,EAAR;AAAYC,QAAAA,KAAK,EAAE,EAAnB;AAAuBC,QAAAA,IAAI,EAAE,EAA7B;AAAiCC,QAAAA,IAAI,EAAE,EAAvC;AAA2CC,QAAAA,SAAS,EAAE,EAAtD;AAA0DC,QAAAA,MAAM,EAAE;AAAlE,OAAD,CALvB;AAMA,KAPD,MASA;AAACd,MAAAA,KAAK,CAAE,6BAAF,EAAgC;AACpCC,QAAAA,MAAM,EAAE,MAD4B;AAEpCmC,QAAAA,OAAO,EAAE;AAAC,0BAAgB;AAAjB,SAF2B;AAGpCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAexB,cAAf;AAH8B,OAAhC,CAAL,CAIEZ,IAJF,CAIOwB,IAAI,IAAIA,IAAI,CAACF,IAAL,EAJf,EAKEtB,IALF,CAKO,MAAMa,YAAY,CAAC;AAACC,QAAAA,IAAI,EAAE,EAAP;AAAWP,QAAAA,KAAK,EAAE,EAAlB;AAAsBE,QAAAA,IAAI,EAAE;AAA5B,OAAD,CALzB;AAMA;AACF;;AACD,QAAM4B,aAAa,GAAItB,SAAS,CAACuB,MAAV,CAAiBC,IAAI,IAAI,CAACA,IAAI,CAACjC,KAAL,IAAY,EAAb,EAAiBkC,WAAjB,GAA+BC,QAA/B,CAAwCtB,MAAM,CAACqB,WAAP,EAAxC,CAAzB,CAAvB;AACA,QAAME,eAAe,GAAIzB,UAAU,CAACqB,MAAX,CAAkB3B,MAAM,IAAI,CAACA,MAAM,CAACG,IAAP,IAAa,EAAd,EAAkB0B,WAAlB,GAAgCC,QAAhC,CAAyCtB,MAAM,CAACqB,WAAP,EAAzC,CAA5B,CAAzB;AACA,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,4BACE,QAAC,MAAD;AACA,MAAA,cAAc,EAAE9C,cADhB;AAEA,MAAA,WAAW,EAAED,WAFb;AAGA,MAAA,YAAY,EAAEG;AAHd;AAAA;AAAA;AAAA;AAAA,YADF,eAME,QAAC,MAAD;AAAA,8BACE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,YAAZ;AAAA,+BACE,QAAC,WAAD;AAAa,UAAA,YAAY,EAAEQ,YAA3B;AACY,UAAA,UAAU,EAAEC,UADxB;AAEY,UAAA,YAAY,EAAEuB,YAF1B;AAGY,UAAA,UAAU,EAAEX;AAHxB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAOE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,YAAZ;AAAyB,QAAA,SAAS,EAAE1B;AAApC;AAAA;AAAA;AAAA;AAAA,cAPF,eASE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,cAAZ;AAAA,+BACE,QAAC,aAAD;AAAe,UAAA,cAAc,EAAEqB,cAA/B;AACY,UAAA,YAAY,EAAEC,YAD1B;AAEY,UAAA,YAAY,EAAEe;AAF1B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cATF,eAcE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAA,gCACE,QAAC,MAAD;AAAQ,UAAA,MAAM,EAAET,MAAhB;AAAwB,UAAA,SAAS,EAAEC;AAAnC;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,UAAD;AAAY,UAAA,eAAe,GAAEsB,eAAe,EAAE7B,YAAF,EAAgBD,cAAhB,EAAgCR,YAAjD;AAA3B;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAdF,eAkBE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,GAAZ;AAAA,gCACE,QAAC,MAAD;AAAQ,UAAA,MAAM,EAAEe,MAAhB;AAAwB,UAAA,SAAS,EAAEC;AAAnC;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,QAAD;AAAU,UAAA,aAAa,EAAEiB;AAAzB;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAlBF;AAAA;AAAA;AAAA;AAAA;AAAA,YANF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAgCD;;GA3FQ7C,I;UAESR,U;;;KAFTQ,I;AA4FT,eAAeA,IAAf","sourcesContent":["import './App.css';\n\nimport { useState, useEffect } from 'react';\n\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\n\nimport Header from './components/Header';\n\nimport Search from './components/Search';\n\nimport NewBookForm from './components/NewBookForm';\nimport NewAuthorForm from './components/NewAuthorForm';\n\nimport BookList from './components/BookList';\nimport AuthorList from './components/AuthorList';\nimport BookDetails from './components/BookDetails';\n\nfunction Auth({ currentUser, setCurrentUser }) {\n  \n  const history = useHistory()\n  const handleLogout = () => {\n    fetch(`/logout`, {\n      method: 'DELETE',\n      credentials: 'include'\n    })\n      .then(res => {\n        if (res.ok) {\n          setCurrentUser(null)\n          history.push('/')\n        }\n      })\n  }\n  const [newBookInput, setNewBook] = useState(\n    {title: '', image: '', isbn: '', desc: '', publisher: '', author: []}\n    );\n  const [newAuthorInput, setNewAuthor] = useState(\n    {name: '', image: '', desc: ''}\n    );\n  const [booksList, setBooksList] = useState([]);\n  const [getAuthors, setGetAuthors] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  useEffect(() => {\n    fetch(\"http://localhost:3000/authors\")\n    .then(response => response.json())\n    .then(authorArr => setGetAuthors(authorArr))\n    }, [setNewAuthor, newAuthorInput, newBookInput])\n  useEffect(() => {\n    fetch(`http://localhost:3000/books`)\n    .then(resp => resp.json())\n    .then(books => setBooksList(books))\n  },[setNewBook, newBookInput, newAuthorInput]);\n  useEffect(() => {\n    fetch(`http://localhost:3000/books`)\n    .then(resp => resp.json())\n    .then(books => console.log(books));})\n  function handleSubmit(e) {\n    e.preventDefault();\n    if(e.target.id === 'newBookForm')\n    {fetch(`http://localhost:3000/books`, {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(newBookInput)})\n      .then(resp => resp.json())\n      .then(() => setNewBook({title: '', image: '', isbn: '', desc: '', publisher: '', author: ''}))\n    }\n    else\n    {fetch(`http://localhost:3000/books`, {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(newAuthorInput)})\n      .then(resp => resp.json())\n      .then(() => setNewAuthor({name: '', image: '', desc: ''}))\n    }\n  }\n  const filteredBooks =  booksList.filter(book => (book.title||'').toLowerCase().includes(search.toLowerCase()))\n  const filteredAuthors =  getAuthors.filter(author => (author.name||'').toLowerCase().includes(search.toLowerCase()))\n  return (\n    <div className=\"App\">\n      <Header\n      setCurrentUser={setCurrentUser}\n      currentUser={currentUser}\n      handleLogout={handleLogout}/>\n      {/* <Search search={search} setSearch={setSearch}/> */}\n      <Switch>\n        <Route path='/books/new'>\n          <NewBookForm newBookInput={newBookInput}\n                      setNewBook={setNewBook}\n                      handleSubmit={handleSubmit}\n                      getAuthors={getAuthors} />\n        </Route>\n        <Route path='/books/:id' component={BookDetails} >\n        </Route>\n        <Route path='/authors/new'>\n          <NewAuthorForm newAuthorInput={newAuthorInput}\n                      setNewAuthor={setNewAuthor}\n                      handleSubmit={handleSubmit} />\n        </Route>\n        <Route path='/authors'>\n          <Search search={search} setSearch={setSearch}/>\n          <AuthorList filteredAuthors={filteredAuthors, setNewAuthor, newAuthorInput, newBookInput}/>\n        </Route>\n        <Route path='/'>\n          <Search search={search} setSearch={setSearch}/>\n          <BookList filteredBooks={filteredBooks}/>\n        </Route>\n      </Switch>\n    </div>\n  );\n}\nexport default Auth;"]},"metadata":{},"sourceType":"module"}